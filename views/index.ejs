<section>
  <h1>Danh sách sản phẩm</h1>
  <form method="get" class="search-bar">
    <div class="search-input-group">
      <span class="search-icon">🔍</span>
      <input type="text" name="q" placeholder="Tìm kiếm sản phẩm..." value="<%= q %>" autocomplete="off">
    </div>
    <div class="search-input-group">
      <span class="search-icon">🏢</span>
      <select name="supplier">
        <option value="all" <%= supplierSelected==='all'?'selected':'' %>>Tất cả nhà cung cấp</option>
        <% suppliers.forEach(s=>{ %>
          <option value="<%= s._id %>" <%= (supplierSelected==s._id.toString())?'selected':'' %>><%= s.name %></option>
        <% }) %>
      </select>
    </div>
    <button class="btn search-btn" type="submit">Lọc</button>
  </form>

  <div class="grid">
    <% const cardColors = ['#fef9c3', '#d1fae5', '#e0e7ff', '#fee2e2', '#f3e8ff', '#cffafe', '#fde68a', '#e0f2fe']; %>
    <% products.forEach((p, idx)=>{ %>
  <div class="card product-card" style="background: '<%= cardColors[idx % cardColors.length] %>';">
        <h3><%= p.name %></h3>
        <p>💲 <strong><%= p.price.toLocaleString() %></strong></p>
        <p>📦 <%= p.quantity %> cái</p>
        <p>🏢 <%= p.supplier ? p.supplier.name : '—' %></p>
      </div>
    <% }) %>
  </div>
</section>
